<!DOCTYPE html>
<html>
  <head><title>Substrate manual/instant sealing – Vasiliy&#39;s Braindump</title>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes" />




<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/svg+xml" href="favicon.svg">
<link rel="manifest" href="/site.webmanifest">


<link rel="stylesheet" href="https://braindump.badykov.com/scss/main.min.86ee1d9b55262d8adc802861853adb3a34175e4ffb5af9eb0574d7bd6ef88ceb.css"/>
</head>
  <body><header>
  
  
  
  <a href= "/about" id="logo">
    <img src="https://braindump.badykov.com/img/logo.png?v=3" srcset="https://braindump.badykov.com/img/logo@2x.png 2x, https://braindump.badykov.com/img/logo@3x.png 3x" alt="Arne Bahlo">
    <h3 class="site-title">Vasiliy&#39;s Braindump</h3>
  </a><form id="search" autocomplete="off"
    action='' method="get">
    <label hidden for="search-input">Search site</label>
    <input type="text" id="search-input" name="query"
    placeholder="Type here to search">
    <input type="submit" value="search">
</form>
</header>

<div class="grid">
  <div class="page" data-level="1">
    <h1 class="collapsed-title">Substrate manual/instant sealing</h1>
    <div class="content">
      <a href="https://braindump.badykov.com/posts/20211103210117-substrate_manual_instant_sealing/" alt="Substrate manual/instant sealing" class="permalink"><h1>Substrate manual/instant sealing</h1></a>
      <h2 id="rationale">Rationale</h2>
<p>Usually in development environment (for local testing) we want to run as a
standalone blockchain node (not as a parachain) and author
blocks instantly as transactions are received. For that purposes
we have two consensus algrorithms in Substrate: <code>Manual Seal</code>
and <code>Instant Seal</code>.</p>
<p>The instant seal consensus engine, and its cousin the manual
seal consensus engine, are both included in the same
<code>sc-consensus-manual-seal</code> crate.</p>
<h2 id="manual-seal">Manual seal</h2>
<p>There is one author and it authors a block whenever you tell it
via an RPC call.</p>
<h2 id="instant-sealing">Instant sealing</h2>
<p>There is one author and it attempts to author a block as soon as
it sees a transaction in the pool, most often leading to one
transaction per block. This is perfect for testing and iterating
on a runtime.</p>
<p>This is similar to <code>Truffle Suite's Ganache</code> in the Ethereum
ecosystem, but without the UI.</p>
<h2 id="references">References</h2>
<ul>
<li>[[<a href="https://www.youtube.com/watch?v=uhkV0jAcWDY&amp;ab%5Fchannel=ParityTechnologies/"
   
    target="_blank">

   https://www.youtube.com/watch?v=uhkV0jAcWDY&ab%5Fchannel=ParityTechnologies/

   
   <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
   


   
</a>
[Manual
Seal and Instant Seal]] - Youtube video</li>
</ul>

      
      
      
    </div>
    


   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   




    </div>
 </div>

<script src="https://braindump.badykov.com/js/page.js" type="text/javascript"></script>

<script id="MathJax-script" async src="https://braindump.badykov.com/js/tex-mml-chtml.js"></script>
<script>
window.store = {
    
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211102153331-3d_printing\/": {
        
        "title": "3D Printing",
        "tags": [],
        "content": "FDM FlashForge Guider 2 https://market.yandex.ru/product--3d-printer-flashforge-guider-ii/1451135129?clid=1603\u0026sku=101465488124\u0026cpa=1   FlyingBear Ghost\n  aliexpress     ozon     Accessories  Сверла для чистки сопел под диаметр (феломент часто забивает сопла) Сопло на замену (может выйти из строя) Набор скобяных инструментов, чтобы отделять модель от стола (шпатель или что-то похожее) Зажимы Лак \u0026ldquo;прелесть\u0026rdquo; (наглухо клеит модель к столу)  SLA SLS Thingversion https://www.thingiverse.com/thing:4924147   ", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211102153331-3d_printing\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/categories\/": {
        
        "title": "Categories",
        "tags": [],
        "content": "", 
        "url": "https:\/\/braindump.badykov.com\/categories\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211031155131-emacs\/": {
        
        "title": "emacs",
        "tags": [],
        "content": "Packages  org-roam     ", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211031155131-emacs\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211031214428-finance\/": {
        
        "title": "Finance",
        "tags": [],
        "content": "Russian finance monitoring   ", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211031214428-finance\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211031155808-org_roam\/": {
        
        "title": "org-roam",
        "tags": [],
        "content": "The shortcuts I use most often:\n SPC+n+f - find or create a new node SPC+n+i - insert a link  ", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211031155808-org_roam\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211031200747-ormolu_el\/": {
        
        "title": "ormolu.el",
        "tags": [],
        "content": "Goals TODOAdd project goals Tasks TODOAdd initial tasks Dates ", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211031200747-ormolu_el\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211102203354-polkadot_secure_validator\/": {
        
        "title": "Polkadot Secure Validator",
        "tags": [],
        "content": "", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211102203354-polkadot_secure_validator\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211031183902-polkadot_staking\/": {
        
        "title": "Polkadot Staking",
        "tags": [],
        "content": "Goals Test validator slashing Test nominator slashing Secure validator infrastructure Tasks TODORun a private network with multiple validator nodes Dates ", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211031183902-polkadot_staking\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/": {
        
        "title": "Posts",
        "tags": [],
        "content": "", 
        "url": "https:\/\/braindump.badykov.com\/posts\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211031221219-russian_finance_monitoring\/": {
        
        "title": "Russian finance monitoring",
        "tags": [],
        "content": "Мониторинг банковских карт физ. лиц  \u0026ldquo;Подозрительно бедные\u0026rdquo; Правило нулевого дохода (проверка соответствия \u0026ldquo;белых\u0026rdquo; доходов и стоимости имущества). Пока будут проверяться только граждане, подающие заявки на пособия  Рекомендации ЦБ Под подозрение и потенциальную блокировку попадают:\n \u0026ldquo;Необычно\u0026rdquo; большое кол-во переводов  \u0026gt;=10 в день \u0026gt;=50 в месяц \u0026gt;30 операций в день по зачислению или списанию   Переводы между физлицами на крупные суммы  От 100 тыс в день Более 1 млн в месяц   Между операциями по зачислению и списанию проходит мало времени  Автоматизированные переводы: Меньше 1 минуты (роботизированные) Ручные переводы: В течение 12 часов одних суток проводятся операции по зачислению списанию средств Это происходит на регулярной основе (в пределах 1 недели)   В течении недели средний остаток на счёте на конец дня не превышает 10% от среднедневного объёма операций по счёту Разные люди совершают переводы с использованием одного устройства  Система финансовых рейтингов физ. лиц  Введение: 2022-2024 Цель: пресечь участие в схемах по обналичке и уходу от налогов  ", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211031221219-russian_finance_monitoring\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211103202435-shell_runtime\/": {
        
        "title": "Shell runtime",
        "tags": [],
        "content": "Its purpose is to provide a minimal runtime of a parachain that will later be exchanged by a runtime upgrade with the real parachain runtime.\n", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211103202435-shell_runtime\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211103135200-substrate_custom_tokens\/": {
        
        "title": "Substrate custom tokens",
        "tags": [],
        "content": "Overview There are a few ways to launch a token with Substrate.\n pallet_balances    pallet_assets    ?  Balances Pallet Overview Manages a single finguble token, handles accounts and their balances.\nInitial balances Supplying initial balances with a genesis config:\npub fn genesis_config(...) -\u0026gt; GenesisConfig { // ...  GenesisConfig { // ...  balances: runtime::BalancesConfig { balances: vec![ // (AccountId, Balance)  // ...  ], }, // ...  } } Transaction fees Normally, transaction fees are paid with this pallet\u0026rsquo;s accounts.\nfee = base_fee + byte_fee * length + weight_fee Details This is implemented in the pallet_transaction_payment   and could be configured in the Runtime like this:\nparameter_types! { // Per-byte fee.  pub const TransactionByteFee: u128 = 1 * MICRO_LUN; // Fee multiplier for operational extrinsics.  pub const OperationalFeeMultiplier: u8 = 5; } impl pallet_transaction_payment::Config for Runtime { // Handler for withdrawing, refunding and depositing the transaction fee.  // Transaction fees are withdrawn before the transaction is executed.  // After the transaction was executed the transaction weight can be  // adjusted, depending on the used resources by the transaction. If the  // transaction weight is lower than expected, parts of the transaction fee  // might be refunded. In the end the fees can be deposited.  //  // Basically, here we\u0026#39;re saying that we want to charge fees from balances pallet.  type OnChargeTransaction = pallet_transaction_payment::CurrencyAdapter\u0026lt;Balances, ()\u0026gt;; // The fee to be paid for making a transaction; the per-byte portion.  type TransactionByteFee = TransactionByteFee; // Convert a weight value into a deductible fee based on the currency type.  type WeightToFee = IdentityFee\u0026lt;Balance\u0026gt;; // Update the multiplier of the next block, based on the previous block\u0026#39;s weight.  type FeeMultiplierUpdate = (); // A fee mulitplier for `Operational` extrinsics to  // compute \u0026#34;virtual tip\u0026#34; to boost their `priority`.  type OperationalFeeMultiplier = OperationalFeeMultiplier; } Assets Pallet Allows to have multiple fungible tokens. Provides a simple asset management functinality, without extra features like locking.\nYou can manage assets with the Polkadot UI \u0026ndash; there is an Assets menu item (under Network).\nObservations  Looks like creation of assets and transfering works from the UI Calling transfer or transferKeepAlive from the extrinsics panel doesn\u0026rsquo;t change the assets.balances state. I\u0026rsquo;m unable to explore the related event internals due to polkadot UI bug     References  Six ways to launch a token on Substrate   (youtube video)  There is no GenericAsset in substrate \u0026gt; 2.x anymore    ", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211103135200-substrate_custom_tokens\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211103210117-substrate_manual_instant_sealing\/": {
        
        "title": "Substrate manual\/instant sealing",
        "tags": [],
        "content": "Rationale Usually in development environment (for local testing) we want to run as a standalone blockchain node (not as a parachain) and author blocks instantly as transactions are received. For that purposes we have two consensus algrorithms in Substrate: Manual Seal and Instant Seal.\nThe instant seal consensus engine, and its cousin the manual seal consensus engine, are both included in the same sc-consensus-manual-seal crate.\nManual seal There is one author and it authors a block whenever you tell it via an RPC call.\nInstant sealing There is one author and it attempts to author a block as soon as it sees a transaction in the pool, most often leading to one transaction per block. This is perfect for testing and iterating on a runtime.\nThis is similar to Truffle Suite's Ganache in the Ethereum ecosystem, but without the UI.\nReferences  [[https://www.youtube.com/watch?v=uhkV0jAcWDY\u0026ab%5Fchannel=ParityTechnologies/   [Manual Seal and Instant Seal]] - Youtube video  ", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211103210117-substrate_manual_instant_sealing\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/posts\/20211104061522-substrate_storage_hashers\/": {
        
        "title": "Substrate storage hashers",
        "tags": [],
        "content": "blake2_128_concat Cryptographically secure hash function.\nChoose this hasher if users of your chain have the ability to affect the storage keys.\ntwox_64_concat Not cryptographically secure, but is more efficient than blake2. You should not use this hasher if chain users can affect the storage key. However, it is perfectly safe to use this hasher to gain performance in scenarios where the users do not control the keys.\nidentity Identity function that returns the same value it receives. This hasher is only an option when the key type in your storage map is already a hash, and is not controllable by the user.\n", 
        "url": "https:\/\/braindump.badykov.com\/posts\/20211104061522-substrate_storage_hashers\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/tags\/": {
        
        "title": "Tags",
        "tags": [],
        "content": "", 
        "url": "https:\/\/braindump.badykov.com\/tags\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/": {
        
        "title": "Vasiliy\u0027s Braindump",
        "tags": [],
        "content": "", 
        "url": "https:\/\/braindump.badykov.com\/"
    },
    
    
    
    "https:\/\/braindump.badykov.com\/about\/": {
        
        "title": "Vasiliy\u0027s Braindump",
        "tags": [],
        "content": "Hi! My name is Vasiliy   . Here you can find my notes, links and references.\nNote that this is a WIP.\nNotes are short and heavily inter-connected. Start wherever and go deeper. Here is the full index  .\n", 
        "url": "https:\/\/braindump.badykov.com\/about\/"
    },
    
}
</script>


<script src="https://braindump.badykov.com/js/lunr.min.js" type="text/javascript"></script>


<script src="https://braindump.badykov.com/js/search.js" type="text/javascript"></script>
</body>
</html>
